{"version":3,"sources":["jsbesier.js","Bezier.ts","state.ts","Link.tsx","Toolbar.tsx","Canvas.tsx","Node.tsx","Start.tsx","Email.tsx","App.tsx","Theme.ts","serviceWorker.ts","index.tsx"],"names":["Math","sgn","x","pow","_curveFunctionCache","_pointOnPath","curve","location","cc","order","fns","c_term","c","t","t_term","one_minus_t_term","_termFunc","terms","p","i","length","push","j","_getCurveFunctions","_x","_y","y","_dist","p1","p2","sqrt","_isPoint","_pointAlongPath","distance","point","prev","tally","curLoc","direction","cur","abs","_pointAlongPathFrom","_gradientAtPoint","slice","dy","dx","Infinity","atan","findControlPoint","sp","tp","soo","too","perpendicular","majorAnchor","minorAnchor","zoomAtom","atom","path","defaultValue","updater","value","max","min","round","canvasPositionAtom","left","top","width","height","darkModePath","defaultEdge","points","useStyles","makeStyles","circle","pointerEvents","fill","cursor","zIndex","arrow","root","filter","position","overflow","stroke","strokeWidth","strokeLinecap","strokeLinejoin","hover","opacity","Link","classes","useStateX","edge","setEdge","useState","active","setActive","setDragging","get","useStateXGetter","start","end","origin","setOrigin","bind","useDrag","event","first","last","movement","args","stopPropagation","startEnd","zoom","s","d","_CP","_CP2","_w","_h","_sx","_sy","_tx","_ty","sourcePos","targetPos","so","to","index","oIndex","x1","y1","x2","y2","cp1x","cp1y","cp2x","cp2y","computeBezier","jsBezier","pos","pp","pp2","xx","m","_theta2","sin","cos","xs","xo","bp","className","style","onMouseEnter","onMouseLeave","clsx","r","cx","cy","DarkModeToggle","darkMode","setDarkMode","IconButton","onClick","v","Zoom","setZoom","z","Button","theme","right","display","boxShadow","palette","divider","background","default","color","text","primary","backgroundColor","memo","bottom","canvas","backgroundImage","backgroundSize","userSelect","dragging","transition","zooming","transform","transformOrigin","children","setPosition","rootRef","useRef","canvasRef","pageX","pageY","setZooming","onChange","oldValue","newPos","zoomOrigin","newZoom","current","px","clientTop","py","clientLeft","ph","clientHeight","pw","clientWidth","ch","cw","zoom_target","zoom_point","getNewPositionOnZoom","useEffect","setTimeout","clearTimeout","cancel","target","filterTaps","bindWheel","useWheel","ctrlKey","altKey","metaKey","xy","preventDefault","domTarget","eventOptions","passive","ref","Node","useStateXValue","viewBox","id","mask","rx","ry","App","prefersDarkMode","useMediaQuery","isDarkTheme","useMemo","createMuiTheme","type","light","main","dark","contrastText","secondary","overrides","MuiButton","textTransform","MuiTab","useTheme","ThemeProvider","Start","Email","Boolean","window","hostname","match","ReactDOM","render","StrictMode","initialState","nodes","edges","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.9344eed1.chunk.js","sourcesContent":["/* eslint-disable no-redeclare */\n// @ts-nocheck\n\nif (typeof Math.sgn == 'undefined') {\n  Math.sgn = function (x) {\n    return x === 0 ? 0 : x > 0 ? 1 : -1;\n  };\n}\n\nvar Vectors = {\n    subtract: function (v1, v2) {\n      return { x: v1.x - v2.x, y: v1.y - v2.y };\n    },\n    dotProduct: function (v1, v2) {\n      return v1.x * v2.x + v1.y * v2.y;\n    },\n    square: function (v) {\n      return Math.sqrt(v.x * v.x + v.y * v.y);\n    },\n    scale: function (v, s) {\n      return { x: v.x * s, y: v.y * s };\n    },\n  },\n  maxRecursion = 64,\n  flatnessTolerance = Math.pow(2.0, -maxRecursion - 1);\n\n/**\n * Calculates the distance that the point lies from the curve.\n *\n * @param point a point in the form {x:567, y:3342}\n * @param curve a Bezier curve in the form [{x:..., y:...}, {x:..., y:...}, {x:..., y:...}, {x:..., y:...}].  note that this is currently\n * hardcoded to assume cubiz beziers, but would be better off supporting any degree.\n * @return a JS object literal containing location and distance, for example: {location:0.35, distance:10}.  Location is analogous to the location\n * argument you pass to the pointOnPath function: it is a ratio of distance travelled along the curve.  Distance is the distance in pixels from\n * the point to the curve.\n */\nvar _distanceFromCurve = function (point, curve) {\n  var candidates = [],\n    w = _convertToBezier(point, curve),\n    degree = curve.length - 1,\n    higherDegree = 2 * degree - 1,\n    numSolutions = _findRoots(w, higherDegree, candidates, 0),\n    v = Vectors.subtract(point, curve[0]),\n    dist = Vectors.square(v),\n    t = 0.0;\n\n  for (var i = 0; i < numSolutions; i++) {\n    v = Vectors.subtract(\n      point,\n      _bezier(curve, degree, candidates[i], null, null),\n    );\n    var newDist = Vectors.square(v);\n    if (newDist < dist) {\n      dist = newDist;\n      t = candidates[i];\n    }\n  }\n  v = Vectors.subtract(point, curve[degree]);\n  newDist = Vectors.square(v);\n  if (newDist < dist) {\n    dist = newDist;\n    t = 1.0;\n  }\n  return { location: t, distance: dist };\n};\n/**\n * finds the nearest point on the curve to the given point.\n */\nvar _nearestPointOnCurve = function (point, curve) {\n  var td = _distanceFromCurve(point, curve);\n  return {\n    point: _bezier(curve, curve.length - 1, td.location, null, null),\n    location: td.location,\n  };\n};\nvar _convertToBezier = function (point, curve) {\n  var degree = curve.length - 1,\n    higherDegree = 2 * degree - 1,\n    c = [],\n    d = [],\n    cdTable = [],\n    w = [],\n    z = [\n      [1.0, 0.6, 0.3, 0.1],\n      [0.4, 0.6, 0.6, 0.4],\n      [0.1, 0.3, 0.6, 1.0],\n    ];\n\n  for (var i = 0; i <= degree; i++) c[i] = Vectors.subtract(curve[i], point);\n  for (var i = 0; i <= degree - 1; i++) {\n    d[i] = Vectors.subtract(curve[i + 1], curve[i]);\n    d[i] = Vectors.scale(d[i], 3.0);\n  }\n  for (var row = 0; row <= degree - 1; row++) {\n    for (var column = 0; column <= degree; column++) {\n      if (!cdTable[row]) cdTable[row] = [];\n      cdTable[row][column] = Vectors.dotProduct(d[row], c[column]);\n    }\n  }\n  for (i = 0; i <= higherDegree; i++) {\n    if (!w[i]) w[i] = [];\n    w[i].y = 0.0;\n    w[i].x = parseFloat(i) / higherDegree;\n  }\n  var n = degree,\n    m = degree - 1;\n  for (var k = 0; k <= n + m; k++) {\n    var lb = Math.max(0, k - m),\n      ub = Math.min(k, n);\n    for (i = lb; i <= ub; i++) {\n      var j = k - i;\n      w[i + j].y += cdTable[j][i] * z[j][i];\n    }\n  }\n  return w;\n};\n/**\n * counts how many roots there are.\n */\nvar _findRoots = function (w, degree, t, depth) {\n  var left = [],\n    right = [],\n    left_count,\n    right_count,\n    left_t = [],\n    right_t = [];\n\n  switch (_getCrossingCount(w, degree)) {\n    case 1: {\n      if (depth >= maxRecursion) {\n        t[0] = (w[0].x + w[degree].x) / 2.0;\n        return 1;\n      }\n      if (_isFlatEnough(w, degree)) {\n        t[0] = _computeXIntercept(w, degree);\n        return 1;\n      }\n      break;\n    }\n    default:\n      return 0;\n  }\n  _bezier(w, degree, 0.5, left, right);\n  left_count = _findRoots(left, degree, left_t, depth + 1);\n  right_count = _findRoots(right, degree, right_t, depth + 1);\n  for (var i = 0; i < left_count; i++) t[i] = left_t[i];\n  for (var i = 0; i < right_count; i++) t[i + left_count] = right_t[i];\n  return left_count + right_count;\n};\nvar _getCrossingCount = function (curve, degree) {\n  var n_crossings = 0,\n    sign,\n    old_sign;\n  sign = old_sign = Math.sgn(curve[0].y);\n  for (var i = 1; i <= degree; i++) {\n    sign = Math.sgn(curve[i].y);\n    if (sign !== old_sign) n_crossings++;\n    old_sign = sign;\n  }\n  return n_crossings;\n};\nvar _isFlatEnough = function (curve, degree) {\n  var error,\n    intercept_1,\n    intercept_2,\n    left_intercept,\n    right_intercept,\n    a,\n    b,\n    c,\n    det,\n    dInv,\n    a1,\n    b1,\n    c1,\n    a2,\n    b2,\n    c2;\n  a = curve[0].y - curve[degree].y;\n  b = curve[degree].x - curve[0].x;\n  c = curve[0].x * curve[degree].y - curve[degree].x * curve[0].y;\n\n  var max_distance_above, max_distance_below;\n  max_distance_above = max_distance_below = 0.0;\n\n  for (var i = 1; i < degree; i++) {\n    var value = a * curve[i].x + b * curve[i].y + c;\n    if (value > max_distance_above) max_distance_above = value;\n    else if (value < max_distance_below) max_distance_below = value;\n  }\n\n  a1 = 0.0;\n  b1 = 1.0;\n  c1 = 0.0;\n  a2 = a;\n  b2 = b;\n  c2 = c - max_distance_above;\n  det = a1 * b2 - a2 * b1;\n  dInv = 1.0 / det;\n  intercept_1 = (b1 * c2 - b2 * c1) * dInv;\n  a2 = a;\n  b2 = b;\n  c2 = c - max_distance_below;\n  det = a1 * b2 - a2 * b1;\n  dInv = 1.0 / det;\n  intercept_2 = (b1 * c2 - b2 * c1) * dInv;\n  left_intercept = Math.min(intercept_1, intercept_2);\n  right_intercept = Math.max(intercept_1, intercept_2);\n  error = right_intercept - left_intercept;\n  return error < flatnessTolerance ? 1 : 0;\n};\nvar _computeXIntercept = function (curve, degree) {\n  var XLK = 1.0,\n    YLK = 0.0,\n    XNM = curve[degree].x - curve[0].x,\n    YNM = curve[degree].y - curve[0].y,\n    XMK = curve[0].x - 0.0,\n    YMK = curve[0].y - 0.0,\n    det = XNM * YLK - YNM * XLK,\n    detInv = 1.0 / det,\n    S = (XNM * YMK - YNM * XMK) * detInv;\n  return 0.0 + XLK * S;\n};\nvar _bezier = function (curve, degree, t, left, right) {\n  var temp = [[]];\n  for (var j = 0; j <= degree; j++) temp[0][j] = curve[j];\n  for (var i = 1; i <= degree; i++) {\n    for (var j = 0; j <= degree - i; j++) {\n      if (!temp[i]) temp[i] = [];\n      if (!temp[i][j]) temp[i][j] = {};\n      temp[i][j].x = (1.0 - t) * temp[i - 1][j].x + t * temp[i - 1][j + 1].x;\n      temp[i][j].y = (1.0 - t) * temp[i - 1][j].y + t * temp[i - 1][j + 1].y;\n    }\n  }\n  if (left != null) for (j = 0; j <= degree; j++) left[j] = temp[j][0];\n  if (right != null)\n    for (j = 0; j <= degree; j++) right[j] = temp[degree - j][j];\n\n  return temp[degree][0];\n};\n\nvar _curveFunctionCache = {};\nvar _getCurveFunctions = function (order) {\n  var fns = _curveFunctionCache[order];\n  if (!fns) {\n    fns = [];\n    var f_term = function () {\n        return function (t) {\n          return Math.pow(t, order);\n        };\n      },\n      l_term = function () {\n        return function (t) {\n          return Math.pow(1 - t, order);\n        };\n      },\n      c_term = function (c) {\n        return function (t) {\n          return c;\n        };\n      },\n      t_term = function () {\n        return function (t) {\n          return t;\n        };\n      },\n      one_minus_t_term = function () {\n        return function (t) {\n          return 1 - t;\n        };\n      },\n      _termFunc = function (terms) {\n        return function (t) {\n          var p = 1;\n          for (var i = 0; i < terms.length; i++) p = p * terms[i](t);\n          return p;\n        };\n      };\n\n    fns.push(new f_term()); // first is t to the power of the curve order\n    for (var i = 1; i < order; i++) {\n      var terms = [new c_term(order)];\n      for (var j = 0; j < order - i; j++) terms.push(new t_term());\n      for (var j = 0; j < i; j++) terms.push(new one_minus_t_term());\n      fns.push(new _termFunc(terms));\n    }\n    fns.push(new l_term()); // last is (1-t) to the power of the curve order\n\n    _curveFunctionCache[order] = fns;\n  }\n\n  return fns;\n};\n\n/**\n * calculates a point on the curve, for a Bezier of arbitrary order.\n * @param curve an array of control points, eg [{x:10,y:20}, {x:50,y:50}, {x:100,y:100}, {x:120,y:100}].  For a cubic bezier this should have four points.\n * @param location a decimal indicating the distance along the curve the point should be located at.  this is the distance along the curve as it travels, taking the way it bends into account.  should be a number from 0 to 1, inclusive.\n */\nvar _pointOnPath = function (curve, location) {\n  var cc = _getCurveFunctions(curve.length - 1),\n    _x = 0,\n    _y = 0;\n  for (var i = 0; i < curve.length; i++) {\n    _x = _x + curve[i].x * cc[i](location);\n    _y = _y + curve[i].y * cc[i](location);\n  }\n\n  return { x: _x, y: _y };\n};\n\nvar _dist = function (p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n};\n\nvar _isPoint = function (curve) {\n  return curve[0].x === curve[1].x && curve[0].y === curve[1].y;\n};\n\n/**\n * finds the point that is 'distance' along the path from 'location'.  this method returns both the x,y location of the point and also\n * its 'location' (proportion of travel along the path); the method below - _pointAlongPathFrom - calls this method and just returns the\n * point.\n */\nvar _pointAlongPath = function (curve, location, distance) {\n  if (_isPoint(curve)) {\n    return {\n      point: curve[0],\n      location: location,\n    };\n  }\n\n  var prev = _pointOnPath(curve, location),\n    tally = 0,\n    curLoc = location,\n    direction = distance > 0 ? 1 : -1,\n    cur = null;\n\n  while (tally < Math.abs(distance)) {\n    curLoc += 0.005 * direction;\n    cur = _pointOnPath(curve, curLoc);\n    tally += _dist(cur, prev);\n    prev = cur;\n  }\n  return { point: cur, location: curLoc };\n};\n\nvar _length = function (curve) {\n  if (_isPoint(curve)) return 0;\n\n  var prev = _pointOnPath(curve, 0),\n    tally = 0,\n    curLoc = 0,\n    direction = 1,\n    cur = null;\n\n  while (curLoc < 1) {\n    curLoc += 0.005 * direction;\n    cur = _pointOnPath(curve, curLoc);\n    tally += _dist(cur, prev);\n    prev = cur;\n  }\n  return tally;\n};\n\n/**\n * finds the point that is 'distance' along the path from 'location'.\n */\nvar _pointAlongPathFrom = function (curve, location, distance) {\n  return _pointAlongPath(curve, location, distance).point;\n};\n\n/**\n * finds the location that is 'distance' along the path from 'location'.\n */\nvar _locationAlongPathFrom = function (curve, location, distance) {\n  return _pointAlongPath(curve, location, distance).location;\n};\n\n/**\n * returns the gradient of the curve at the given location, which is a decimal between 0 and 1 inclusive.\n *\n * thanks // http://bimixual.org/AnimationLibrary/beziertangents.html\n */\nvar _gradientAtPoint = function (curve, location) {\n  var p1 = _pointOnPath(curve, location),\n    p2 = _pointOnPath(curve.slice(0, curve.length - 1), location),\n    dy = p2.y - p1.y,\n    dx = p2.x - p1.x;\n  return dy === 0 ? Infinity : Math.atan(dy / dx);\n};\n\n/**\n   returns the gradient of the curve at the point which is 'distance' from the given location.\n   if this point is greater than location 1, the gradient at location 1 is returned.\n   if this point is less than location 0, the gradient at location 0 is returned.\n   */\nvar _gradientAtPointAlongPathFrom = function (curve, location, distance) {\n  var p = _pointAlongPath(curve, location, distance);\n  if (p.location > 1) p.location = 1;\n  if (p.location < 0) p.location = 0;\n  return _gradientAtPoint(curve, p.location);\n};\n\n/**\n * calculates a line that is 'length' pixels long, perpendicular to, and centered on, the path at 'distance' pixels from the given location.\n * if distance is not supplied, the perpendicular for the given location is computed (ie. we set distance to zero).\n */\nvar _perpendicularToPathAt = function (curve, location, length, distance) {\n  distance = distance == null ? 0 : distance;\n  var p = _pointAlongPath(curve, location, distance),\n    m = _gradientAtPoint(curve, p.location),\n    _theta2 = Math.atan(-1 / m),\n    y = (length / 2) * Math.sin(_theta2),\n    x = (length / 2) * Math.cos(_theta2);\n  return [\n    { x: p.point.x + x, y: p.point.y + y },\n    { x: p.point.x - x, y: p.point.y - y },\n  ];\n};\n\n/**\n * Calculates all intersections of the given line with the given curve.\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param curve\n * @returns {Array}\n */\nvar _lineIntersection = function (x1, y1, x2, y2, curve) {\n  var a = y2 - y1,\n    b = x1 - x2,\n    c = x1 * (y1 - y2) + y1 * (x2 - x1),\n    coeffs = _computeCoefficients(curve),\n    p = [\n      a * coeffs[0][0] + b * coeffs[1][0],\n      a * coeffs[0][1] + b * coeffs[1][1],\n      a * coeffs[0][2] + b * coeffs[1][2],\n      a * coeffs[0][3] + b * coeffs[1][3] + c,\n    ],\n    r = _cubicRoots.apply(null, p),\n    intersections = [];\n\n  if (r != null) {\n    for (var i = 0; i < 3; i++) {\n      var t = r[i],\n        t2 = Math.pow(t, 2),\n        t3 = Math.pow(t, 3),\n        x = [\n          coeffs[0][0] * t3 +\n            coeffs[0][1] * t2 +\n            coeffs[0][2] * t +\n            coeffs[0][3],\n          coeffs[1][0] * t3 +\n            coeffs[1][1] * t2 +\n            coeffs[1][2] * t +\n            coeffs[1][3],\n        ];\n\n      // check bounds of the line\n      var s;\n      if (x2 - x1 !== 0) {\n        s = (x[0] - x1) / (x2 - x1);\n      } else {\n        s = (x[1] - y1) / (y2 - y1);\n      }\n\n      if (t >= 0 && t <= 1.0 && s >= 0 && s <= 1.0) {\n        intersections.push(x);\n      }\n    }\n  }\n\n  return intersections;\n};\n\n/**\n * Calculates all intersections of the given box with the given curve.\n * @param x X position of top left corner of box\n * @param y Y position of top left corner of box\n * @param w width of box\n * @param h height of box\n * @param curve\n * @returns {Array}\n */\nvar _boxIntersection = function (x, y, w, h, curve) {\n  var i = [];\n  i.push.apply(i, _lineIntersection(x, y, x + w, y, curve));\n  i.push.apply(i, _lineIntersection(x + w, y, x + w, y + h, curve));\n  i.push.apply(i, _lineIntersection(x + w, y + h, x, y + h, curve));\n  i.push.apply(i, _lineIntersection(x, y + h, x, y, curve));\n  return i;\n};\n\n/**\n * Calculates all intersections of the given bounding box with the given curve.\n * @param boundingBox Bounding box, in { x:.., y:..., w:..., h:... } format.\n * @param curve\n * @returns {Array}\n */\nvar _boundingBoxIntersection = function (boundingBox, curve) {\n  var i = [];\n  i.push.apply(\n    i,\n    _lineIntersection(\n      boundingBox.x,\n      boundingBox.y,\n      boundingBox.x + boundingBox.w,\n      boundingBox.y,\n      curve,\n    ),\n  );\n  i.push.apply(\n    i,\n    _lineIntersection(\n      boundingBox.x + boundingBox.w,\n      boundingBox.y,\n      boundingBox.x + boundingBox.w,\n      boundingBox.y + boundingBox.h,\n      curve,\n    ),\n  );\n  i.push.apply(\n    i,\n    _lineIntersection(\n      boundingBox.x + boundingBox.w,\n      boundingBox.y + boundingBox.h,\n      boundingBox.x,\n      boundingBox.y + boundingBox.h,\n      curve,\n    ),\n  );\n  i.push.apply(\n    i,\n    _lineIntersection(\n      boundingBox.x,\n      boundingBox.y + boundingBox.h,\n      boundingBox.x,\n      boundingBox.y,\n      curve,\n    ),\n  );\n  return i;\n};\n\nfunction _computeCoefficientsForAxis(curve, axis) {\n  return [\n    -curve[0][axis] + 3 * curve[1][axis] + -3 * curve[2][axis] + curve[3][axis],\n    3 * curve[0][axis] - 6 * curve[1][axis] + 3 * curve[2][axis],\n    -3 * curve[0][axis] + 3 * curve[1][axis],\n    curve[0][axis],\n  ];\n}\n\nfunction _computeCoefficients(curve) {\n  return [\n    _computeCoefficientsForAxis(curve, 'x'),\n    _computeCoefficientsForAxis(curve, 'y'),\n  ];\n}\n\nfunction sgn(x) {\n  return x < 0 ? -1 : x > 0 ? 1 : 0;\n}\n\nfunction _cubicRoots(a, b, c, d) {\n  var A = b / a,\n    B = c / a,\n    C = d / a,\n    Q = (3 * B - Math.pow(A, 2)) / 9,\n    R = (9 * A * B - 27 * C - 2 * Math.pow(A, 3)) / 54,\n    D = Math.pow(Q, 3) + Math.pow(R, 2),\n    S,\n    T,\n    t = [];\n\n  if (D >= 0) {\n    // complex or duplicate roots\n    S = sgn(R + Math.sqrt(D)) * Math.pow(Math.abs(R + Math.sqrt(D)), 1 / 3);\n    T = sgn(R - Math.sqrt(D)) * Math.pow(Math.abs(R - Math.sqrt(D)), 1 / 3);\n\n    t[0] = -A / 3 + (S + T);\n    t[1] = -A / 3 - (S + T) / 2;\n    t[2] = -A / 3 - (S + T) / 2;\n\n    /*discard complex roots*/\n    if (Math.abs((Math.sqrt(3) * (S - T)) / 2) !== 0) {\n      t[1] = -1;\n      t[2] = -1;\n    }\n  } // distinct real roots\n  else {\n    var th = Math.acos(R / Math.sqrt(-Math.pow(Q, 3)));\n    t[0] = 2 * Math.sqrt(-Q) * Math.cos(th / 3) - A / 3;\n    t[1] = 2 * Math.sqrt(-Q) * Math.cos((th + 2 * Math.PI) / 3) - A / 3;\n    t[2] = 2 * Math.sqrt(-Q) * Math.cos((th + 4 * Math.PI) / 3) - A / 3;\n  }\n\n  // discard out of spec roots\n  for (var i = 0; i < 3; i++) {\n    if (t[i] < 0 || t[i] > 1.0) {\n      t[i] = -1;\n    }\n  }\n\n  return t;\n}\n\nexport {\n  _distanceFromCurve as distanceFromCurve,\n  _gradientAtPoint as gradientAtPoint,\n  _gradientAtPointAlongPathFrom as gradientAtPointAlongCurveFrom,\n  _nearestPointOnCurve as nearestPointOnCurve,\n  _pointOnPath as pointOnCurve,\n  _pointAlongPathFrom as pointAlongCurveFrom,\n  _perpendicularToPathAt as perpendicularToCurveAt,\n  _locationAlongPathFrom as locationAlongCurveFrom,\n  _length as getLength,\n  _lineIntersection as lineIntersection,\n  _boxIntersection as boxIntersection,\n  _boundingBoxIntersection as boundingBoxIntersection,\n};\n","import { Point } from './types';\n\nfunction findControlPoint(\n  point: Point,\n  sp: Point,\n  tp: Point,\n  soo = [0, 0],\n  too = [0, 0],\n) {\n  var perpendicular = soo[0] !== too[0] || soo[1] === too[1],\n    p = [];\n\n  let majorAnchor =\n      Math.abs(sp.x - tp.x) < 100 && Math.abs(sp.y - tp.y) < 100 ? 1 : 150,\n    minorAnchor = 10;\n\n  if (!perpendicular) {\n    if (soo[0] === 0) {\n      p.push(sp.x < tp.x ? point.x + minorAnchor : point.x - minorAnchor);\n    } else {\n      p.push(point.x - majorAnchor * soo[0]);\n    }\n\n    if (soo[1] === 0) {\n      p.push(sp.y < tp.y ? point.y + minorAnchor : point.y - minorAnchor);\n    } else {\n      p.push(point.y + majorAnchor * too[1]);\n    }\n  } else {\n    if (too[0] === 0) {\n      p.push(tp.x < sp.x ? point.x + minorAnchor : point.x - minorAnchor);\n    } else {\n      p.push(point.x + majorAnchor * too[0]);\n    }\n\n    if (too[1] === 0) {\n      p.push(tp.y < sp.y ? point.y + minorAnchor : point.y - minorAnchor);\n    } else {\n      p.push(point.y + majorAnchor * soo[1]);\n    }\n  }\n\n  return p;\n}\n\n// _curryAnchor(0.5, 0, 0, -1, \"TopCenter\");\n// _curryAnchor(0.5, 1, 0, 1, \"BottomCenter\");\n// _curryAnchor(0, 0.5, -1, 0, \"LeftMiddle\");\n// _curryAnchor(1, 0.5, 1, 0, \"RightMiddle\");\n\n// _curryAnchor(0.5, 0, 0, -1, \"Top\");\n// _curryAnchor(0.5, 1, 0, 1, \"Bottom\");\n// _curryAnchor(0, 0.5, -1, 0, \"Left\");\n// _curryAnchor(1, 0.5, 1, 0, \"Right\");\n// _curryAnchor(0.5, 0.5, 0, 0, \"Center\");\n// _curryAnchor(1, 0, 0, -1, \"TopRight\");\n// _curryAnchor(1, 1, 0, 1, \"BottomRight\");\n// _curryAnchor(0, 0, 0, -1, \"TopLeft\");\n// _curryAnchor(0, 1, 0, 1, \"BottomLeft\");\n\nfunction computeBezier(sp: Point, tp: Point) {\n  const _w = Math.abs(sp.x - tp.x),\n    _h = Math.abs(sp.y - tp.y);\n  var _CP,\n    _CP2,\n    _sx = sp.x < tp.x ? _w : 0,\n    _sy = sp.y < tp.y ? _h : 0,\n    _tx = sp.x < tp.x ? 0 : _w,\n    _ty = sp.y < tp.y ? 0 : _h;\n  const sourcePos = [sp.x, sp.y];\n  const targetPos = [tp.x, tp.y];\n  const so = [0, 0];\n  const to = [0, 0];\n  if ((so[0] === 0 && so[1] === 0) || (to[0] === 0 && to[1] === 0)) {\n    var index = _w > _h ? 0 : 1,\n      oIndex = [1, 0][index];\n    so[index] = sourcePos[index] > targetPos[index] ? -1 : 1;\n    to[index] = sourcePos[index] > targetPos[index] ? 1 : -1;\n    so[oIndex] = 0;\n    to[oIndex] = 0;\n  }\n\n  _CP = findControlPoint({ x: _sx, y: _sy }, sp, tp, so, to);\n  _CP2 = findControlPoint({ x: _tx, y: _ty }, tp, sp, to, so);\n\n  return {\n    x1: _sx,\n    y1: _sy,\n    x2: _tx,\n    y2: _ty,\n    cp1x: _CP[0],\n    cp1y: _CP[1],\n    cp2x: _CP2[0],\n    cp2y: _CP2[1],\n  };\n}\n\nexport { computeBezier };\n","import { atom } from '@cloudio/statex';\n\nexport const defaultState = { nodes: [], edges: [] };\n\nexport const zoomAtom = atom({\n  path: ['canvas', 'zoom'],\n  defaultValue: 1,\n  updater: ({ value }) =>\n    Math.max(0.1, Math.min(10, Math.round(value * 100) / 100)),\n});\n\nexport const zoomingAtom = atom({\n  path: ['canvas', 'zooming'],\n  defaultValue: false,\n});\n\n//let timeout: NodeJS.Timeout;\n\n//const current = { first: false, last: false, zoom: 1, timeout: 0 };\n\n// export const zoomSelector = selector({\n//   path: ['selectors', 'canvas', 'zoom'],\n//   defaultValue: { first: false, last: false, zoom: 1 },\n//   get: ({ get }) => {\n//     const { first, last } = current;\n//     return { first, last, zoom: get(zoomAtom) };\n//   },\n//   set: ({ set, value: { first, last, zoom } }) => {\n//     if (timeout) {\n//       clearTimeout(timeout);\n//     }\n//     set(zoomAtom, value);\n//     set(zoomingAtom, true);\n//     timeout = setTimeout(() => {\n//       set(zoomingAtom, false);\n//     }, 1000);\n\n//     current.first = first;\n//     current.last = last;\n//     current.zoom = zoom;\n//     return { first, last, zoom };\n//   },\n// });\n\nexport const canvasPositionAtom = atom({\n  path: ['canvas', 'position'],\n  defaultValue: { left: -1000, top: -1000, width: 4000, height: 4000 },\n});\n\nexport const darkModePath = ['global', 'ui', 'darkMode'];\n","import React, { useState } from 'react';\nimport { useStateX, useStateXGetter } from '@cloudio/statex';\nimport { Edge } from './types';\nimport { useDrag } from 'react-use-gesture';\nimport { makeStyles } from '@material-ui/styles';\nimport clsx from 'clsx';\nimport * as jsBezier from './jsbesier';\nimport { computeBezier } from './Bezier';\nimport { zoomAtom } from './state';\n\nconst defaultEdge: Edge = {\n  points: [\n    { x: 1300, y: 1100 },\n    { x: 1500, y: 1300 },\n  ],\n};\n\nfunction Link() {\n  const classes = useStyles();\n  const [edge, setEdge] = useStateX(['edge'], defaultEdge);\n  const [active, setActive] = useState(false);\n  const [, setDragging] = useState(false);\n  const get = useStateXGetter();\n  const { points } = edge;\n  const start = points[0];\n  const end = points[points.length - 1];\n\n  const [origin, setOrigin] = useState(start);\n\n  const bind = useDrag(({ event, first, last, movement, args }) => {\n    event?.stopPropagation();\n    const [startEnd] = args;\n    if (first) {\n      setOrigin(startEnd ? start : end);\n      setDragging(true);\n    } else if (last) {\n      setDragging(false);\n    } else {\n      const zoom = get(zoomAtom);\n      const s = {\n        x: origin.x + movement[0] / zoom,\n        y: origin.y + movement[1] / zoom,\n      };\n      const [start, end] = edge.points;\n      setEdge((edge) => ({\n        ...edge,\n        points: [startEnd ? s : start, startEnd ? end : s],\n      }));\n    }\n  });\n\n  const d = computeBezier(start, end);\n  const width = Math.abs(start.x - end.x),\n    height = Math.abs(start.y - end.y);\n  const curve = [\n    { x: d.x1, y: d.y1 },\n    { x: d.cp1x, y: d.cp1y },\n    { x: d.cp2x, y: d.cp2y },\n    { x: d.x2, y: d.y2 },\n  ];\n  const length = jsBezier.getLength(curve);\n  const pos = (length - 0) / length;\n  const pp = jsBezier.pointAlongCurveFrom(curve, 1, -8);\n  const pp2 = jsBezier.pointAlongCurveFrom(curve, 1, -18);\n  const xx = jsBezier.perpendicularToCurveAt(curve, pos, 16, -24);\n  const [xs, xo] = xx;\n  const bp = `M ${d.x2} ${d.y2} C ${d.cp2x},${d.cp2y} ${d.cp1x},${d.cp1y} ${pp2.x},${pp2.y}`;\n  const arrow = `M${pp.x} ${pp.y} L${xs.x} ${xs.y} L${pp2.x} ${pp2.y} L${xo.x} ${xo.y} Z`;\n  const left = Math.min(start.x, end.x);\n  const top = Math.min(start.y, end.y);\n  return (\n    <svg\n      className={classes.root}\n      style={{ top, left, width, height }}\n      onMouseEnter={() => setActive(true)}\n      onMouseLeave={() => setActive(false)}>\n      <path d={bp} className={classes.path}></path>\n      {active ? (\n        <path d={bp} className={clsx(classes.path, classes.hover)}></path>\n      ) : null}\n      <path className={classes.arrow} d={arrow} />\n      {active ? (\n        <path d={arrow} className={clsx(classes.path, classes.hover)}></path>\n      ) : null}\n      <circle\n        {...bind(true)}\n        className={classes.circle}\n        r=\"8\"\n        cx={d.x2}\n        cy={d.y2}\n      />\n      <circle\n        {...bind(false)}\n        className={classes.circle}\n        r=\"8\"\n        cx={d.x1}\n        cy={d.y1}\n      />\n    </svg>\n  );\n}\n\nconst useStyles = makeStyles({\n  circle: {\n    pointerEvents: 'all',\n    fill: '#00bfff',\n    cursor: 'move',\n    zIndex: 10,\n  },\n  arrow: {\n    pointerEvents: 'all',\n    fill: '#00bfff',\n  },\n  root: {\n    filter: 'drop-shadow( 3px 3px 2px rgba(0, 191, 255, 0.7))',\n    position: 'absolute',\n    overflow: 'visible',\n    pointerEvents: 'none',\n    left: 0,\n    top: 0,\n    width: 10,\n    height: 10,\n    zIndex: 5,\n  },\n  path: {\n    pointerEvents: 'visibleStroke',\n    stroke: '#00bfff',\n    fill: 'none',\n    strokeWidth: 2,\n    cursor: 'pointer',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n    zIndex: 5,\n  },\n  hover: {\n    opacity: 0.3,\n    strokeWidth: 8,\n  },\n});\n\nexport default Link;\n","import React, { memo } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { useStateX } from '@cloudio/statex';\nimport { zoomAtom, darkModePath } from './state';\nimport IconButton from '@material-ui/core/IconButton';\nimport ZoomInIcon from '@material-ui/icons/ZoomIn';\nimport ZoomOutIcon from '@material-ui/icons/ZoomOut';\nimport DarkThemeIcon from '@material-ui/icons/Brightness4';\nimport LiteThemeIcon from '@material-ui/icons/BrightnessHigh';\n\nimport { Button, Theme } from '@material-ui/core';\n\nfunction DarkModeToggle() {\n  const [darkMode, setDarkMode] = useStateX(darkModePath, false);\n\n  return (\n    <div>\n      <IconButton onClick={() => setDarkMode((v) => !v)}>\n        {darkMode ? <LiteThemeIcon /> : <DarkThemeIcon />}\n      </IconButton>\n    </div>\n  );\n}\n\nfunction Zoom() {\n  const [zoom, setZoom] = useStateX(zoomAtom);\n\n  return (\n    <div>\n      <IconButton onClick={() => setZoom((z) => z - 0.1)}>\n        <ZoomOutIcon />\n      </IconButton>\n      <Button onClick={() => setZoom((z) => 1)}>\n        {Math.round(zoom * 100)}\n      </Button>\n      <IconButton onClick={() => setZoom((z) => z + 0.1)}>\n        <ZoomInIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface Props {}\n\nfunction Toolbar() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Zoom />\n      <DarkModeToggle />\n    </div>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: 'fixed',\n    top: 8,\n    right: 8,\n    display: 'flex',\n    boxShadow: `0 5px 10px ${theme.palette.divider}, 0 0 0 1px ${theme.palette.background.default}`,\n    color: theme.palette.text.primary,\n    backgroundColor: theme.palette.background.default,\n  },\n}));\n\nexport default memo(Toolbar);\n","import React, { memo, useState, useRef, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport Toolbar from './Toolbar';\nimport { useStateX } from '@cloudio/statex';\nimport clsx from 'clsx';\nimport { canvasPositionAtom, zoomAtom } from './state';\nimport { useDrag, useWheel } from 'react-use-gesture';\nimport { Theme } from '@material-ui/core';\n\ninterface Props {\n  children?: any;\n}\n\nfunction getNewPositionOnZoom(\n  rootRef: React.MutableRefObject<HTMLDivElement | null>,\n  canvasRef: React.MutableRefObject<HTMLDivElement | null>,\n  pageX: number,\n  pageY: number,\n  zoomOrigin: number,\n  newZoom: number,\n  left: number,\n  top: number,\n): { left: number; top: number } {\n  if (rootRef.current === null || canvasRef.current === null) {\n    return { left: 0, top: 0 };\n  }\n  const {\n    clientTop: px,\n    clientLeft: py,\n    clientHeight: ph,\n    clientWidth: pw,\n  } = rootRef.current;\n  const { clientHeight: ch, clientWidth: cw } = canvasRef.current;\n\n  if (pageX === -1 && pageY === -1) {\n    pageX = px + pw / 2;\n    pageY = py + ph / 2;\n  }\n\n  const x = pageX - px;\n  const y = pageY - py;\n\n  var zoom_target = { x: 0, y: 0 };\n  var zoom_point = { x, y };\n\n  zoom_target.x = (zoom_point.x - left) / zoomOrigin;\n  zoom_target.y = (zoom_point.y - top) / zoomOrigin;\n\n  left = -zoom_target.x * newZoom + zoom_point.x;\n  top = -zoom_target.y * newZoom + zoom_point.y;\n\n  left = Math.min(x, Math.max(x - cw * newZoom, left));\n  top = Math.min(y, Math.max(y - ch * newZoom, top));\n\n  return { left, top };\n}\n\nfunction Canvas({ children }: Props) {\n  const [pos, setPosition] = useStateX(canvasPositionAtom);\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const canvasRef = useRef<HTMLDivElement | null>(null);\n  const point = useRef({ pageX: -1, pageY: -1 });\n  const [zooming, setZooming] = useState(false);\n  const [zoom, setZoom] = useStateX(zoomAtom, {\n    onChange: ({ value, oldValue }) => {\n      const newPos = getNewPositionOnZoom(\n        rootRef,\n        canvasRef,\n        point.current.pageX,\n        point.current.pageY,\n        oldValue ?? 1,\n        value,\n        pos.left,\n        pos.top,\n      );\n      setZooming(true);\n      setPosition((p) => ({ ...p, ...newPos }));\n    },\n  });\n  const [dragging, setDragging] = useState(false);\n  const classes = useStyles({ zooming, dragging, zoom, ...pos });\n  const [origin, setOrigin] = useState(pos);\n  useEffect(() => {\n    if (zooming) {\n      const t = setTimeout(() => {\n        setZooming(false);\n      }, 1000);\n      return () => clearTimeout(t);\n    }\n  }, [zooming]);\n  const bind = useDrag(\n    ({ first, last, movement, cancel, event }) => {\n      if (first) {\n        if (\n          event?.target === canvasRef.current ||\n          event?.target === rootRef.current\n        ) {\n          setOrigin(pos);\n          setDragging(true);\n        } else {\n          cancel?.();\n        }\n      } else if (last) {\n        setOrigin(pos);\n        setDragging(false);\n      } else if (dragging) {\n        setPosition((p) => ({\n          ...p,\n          left: origin.left + movement[0],\n          top: origin.top + movement[1],\n        }));\n      }\n    },\n    { filterTaps: true },\n  );\n  const bindWheel = useWheel(\n    ({ event, first, last, movement, ctrlKey, altKey, metaKey, xy }) => {\n      event?.preventDefault();\n      event?.stopPropagation();\n      if (first) {\n        const { pageX, pageY } = event as React.WheelEvent;\n        point.current.pageX = pageX;\n        point.current.pageY = pageY;\n      } else if (last) {\n        point.current.pageX = -1;\n        point.current.pageY = -1;\n      } else {\n        if (ctrlKey || altKey || metaKey) {\n          setZoom((z) => z - movement[1] / 1000);\n        }\n      }\n    },\n    { domTarget: rootRef, eventOptions: { passive: false } },\n  );\n  useEffect(bindWheel, [bindWheel]);\n  // const { left, top } = pos;\n  // const style: React.CSSProperties = {\n  //   userSelect: dragging ? 'none' : 'unset',\n  //   transition: zooming ? 'transform 0.4s linear' : 'unset',\n  //   transform: `translate(${left}px, ${top}px) scale(${zoom})`,\n  //   transformOrigin: '0px 0px',\n  // };\n  return (\n    <div {...bind()} ref={rootRef} className={clsx(classes.root)}>\n      <div ref={canvasRef} className={clsx(classes.canvas, classes.zoom)}>\n        {children}\n      </div>\n      <Toolbar />\n    </div>\n  );\n}\n\ninterface StyleProps {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  zoom: number;\n  zooming: boolean;\n  dragging: boolean;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    color: theme.palette.text.primary,\n    backgroundColor: theme.palette.background.default,\n    zIndex: -1,\n  },\n  canvas: {\n    position: 'absolute',\n    width: ({ width }: StyleProps) => width,\n    height: ({ height }: StyleProps) => height,\n    overflow: 'visible',\n    backgroundImage: `linear-gradient(0deg,transparent 24%,${theme.palette.divider} 25%,${theme.palette.divider} 26%,transparent 27%,transparent 74%,${theme.palette.divider} 75%,${theme.palette.divider} 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,${theme.palette.divider} 25%,${theme.palette.divider} 26%,transparent 27%,transparent 74%,${theme.palette.divider} 75%,${theme.palette.divider} 76%,transparent 77%,transparent)`,\n    backgroundSize: '50px 50px',\n    backgroundColor: theme.palette.background.default,\n  },\n  zoom: {\n    userSelect: ({ dragging }: StyleProps) => (dragging ? 'none' : 'unset'),\n    transition: ({ zooming }: StyleProps) =>\n      zooming ? 'transform 0.4s linear' : 'unset',\n    transform: ({ left, top, zoom }: StyleProps) =>\n      `translate(${left}px, ${top}px) scale(${zoom})`,\n    transformOrigin: '0px 0px',\n  },\n}));\n\nexport default memo(Canvas);\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Theme } from '@material-ui/core';\nimport { useDrag } from 'react-use-gesture';\nimport { useStateXValue } from '@cloudio/statex';\nimport { zoomAtom } from './state';\n\nfunction Node() {\n  const classes = useStyles();\n  const [dragging, setDragging] = useState(false);\n  const [pos, setPosition] = useState({ left: 1200, top: 1200 });\n  const [origin, setOrigin] = useState(pos);\n  const zoom = useStateXValue(zoomAtom);\n\n  const bind = useDrag(\n    ({ first, last, movement, event }) => {\n      event?.stopPropagation();\n      if (first) {\n        setOrigin(pos);\n        setDragging(true);\n      } else if (last) {\n        setOrigin(pos);\n        setDragging(false);\n      } else if (dragging) {\n        setPosition((p) => ({\n          ...p,\n          left: origin.left + movement[0] / zoom,\n          top: origin.top + movement[1] / zoom,\n        }));\n      }\n    },\n    { filterTaps: true },\n  );\n\n  const bp = 'M50,0 L100,50 L50,100 L0,50 Z';\n  return (\n    <svg style={pos} {...bind()} className={classes.root} viewBox=\"0 0 100 100\">\n      <mask id=\"myMask\">\n        <rect\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          x=\"-10\"\n          y=\"-10\"\n          width=\"120\"\n          height=\"120\"\n          fill=\"white\"\n        />\n        <circle cx=\"50\" cy=\"84\" r=\"8\" fill=\"black\" />\n      </mask>\n\n      <path mask=\"url(#myMask)\" d={bp} className={classes.path}></path>\n    </svg>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  circle: {\n    pointerEvents: 'all',\n    fill: '#fff',\n    stroke: '#00bfff',\n    strokeWidth: 0,\n    cursor: 'move',\n  },\n  arrow: {\n    pointerEvents: 'all',\n    fill: '#00bfff',\n  },\n  root: {\n    cursor: 'move',\n    position: 'absolute',\n    overflow: 'visible',\n    pointerEvents: 'none',\n    width: 80,\n    height: 80,\n    filter: 'drop-shadow( 3px 3px 2px rgba(0, 191, 255, 0.7))',\n    //boxShadow: `0 5px 10px ${theme.palette.divider}, 0 0 0 1px ${theme.palette.background.default}`,\n  },\n  path: {\n    pointerEvents: 'all',\n    stroke: 'rgb(0, 191, 255)',\n    fill: 'rgb(0, 191, 255)',\n    strokeWidth: 8,\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  },\n  hover: {\n    opacity: 0.3,\n    strokeWidth: 8,\n  },\n}));\n\nexport default Node;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Theme } from '@material-ui/core';\nimport { useDrag } from 'react-use-gesture';\nimport { useStateXValue } from '@cloudio/statex';\nimport { zoomAtom } from './state';\n\nfunction Node() {\n  const classes = useStyles();\n  const [dragging, setDragging] = useState(false);\n  const [pos, setPosition] = useState({ left: 1300, top: 1200 });\n  const [origin, setOrigin] = useState(pos);\n  const zoom = useStateXValue(zoomAtom);\n\n  const bind = useDrag(\n    ({ first, last, movement, event }) => {\n      event?.stopPropagation();\n      if (first) {\n        setOrigin(pos);\n        setDragging(true);\n      } else if (last) {\n        setOrigin(pos);\n        setDragging(false);\n      } else if (dragging) {\n        setPosition((p) => ({\n          ...p,\n          left: origin.left + movement[0] / zoom,\n          top: origin.top + movement[1] / zoom,\n        }));\n      }\n    },\n    { filterTaps: true },\n  );\n\n  return (\n    <svg style={pos} {...bind()} className={classes.root} viewBox=\"0 0 100 100\">\n      <mask id=\"myMask\">\n        <rect\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          x=\"-10\"\n          y=\"-10\"\n          width=\"120\"\n          height=\"120\"\n          fill=\"white\"\n        />\n        <circle cx=\"50\" cy=\"84\" r=\"8\" fill=\"black\" />\n      </mask>\n\n      <circle\n        mask=\"url(#myMask)\"\n        className={classes.path}\n        cx=\"50\"\n        cy=\"50\"\n        r=\"50\"\n        fill=\"black\"\n      />\n    </svg>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  circle: {\n    pointerEvents: 'all',\n    fill: '#fff',\n    stroke: '#00bfff',\n    strokeWidth: 0,\n    cursor: 'move',\n  },\n  arrow: {\n    pointerEvents: 'all',\n    fill: '#00bfff',\n  },\n  root: {\n    cursor: 'move',\n    position: 'absolute',\n    overflow: 'visible',\n    pointerEvents: 'none',\n    width: 80,\n    height: 80,\n    filter: 'drop-shadow( 3px 3px 2px rgba(0, 191, 255, 0.7))',\n    //boxShadow: `0 5px 10px ${theme.palette.divider}, 0 0 0 1px ${theme.palette.background.default}`,\n  },\n  path: {\n    pointerEvents: 'all',\n    stroke: 'rgb(0, 191, 255)',\n    fill: 'rgb(0, 191, 255)',\n    strokeWidth: 8,\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  },\n  hover: {\n    opacity: 0.3,\n    strokeWidth: 8,\n  },\n}));\n\nexport default Node;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Theme } from '@material-ui/core';\nimport { useDrag } from 'react-use-gesture';\nimport { useStateXValue } from '@cloudio/statex';\nimport { zoomAtom } from './state';\n\nfunction Node() {\n  const classes = useStyles();\n  const [dragging, setDragging] = useState(false);\n  const [pos, setPosition] = useState({ left: 1300, top: 1300 });\n  const [origin, setOrigin] = useState(pos);\n  const zoom = useStateXValue(zoomAtom);\n\n  const bind = useDrag(\n    ({ first, last, movement, event }) => {\n      event?.stopPropagation();\n      if (first) {\n        setOrigin(pos);\n        setDragging(true);\n      } else if (last) {\n        setOrigin(pos);\n        setDragging(false);\n      } else if (dragging) {\n        setPosition((p) => ({\n          ...p,\n          left: origin.left + movement[0] / zoom,\n          top: origin.top + movement[1] / zoom,\n        }));\n      }\n    },\n    { filterTaps: true },\n  );\n\n  return (\n    <svg style={pos} {...bind()} className={classes.root} viewBox=\"0 0 120 80\">\n      <mask id=\"myMask1\">\n        <rect x=\"0\" y=\"0\" width=\"120\" height=\"80\" fill=\"white\" />\n        <circle cx=\"60\" cy=\"64\" r=\"8\" fill=\"black\" />\n        <line x1=\"0\" y1=\"0\" x2=\"60\" y2=\"40\" stroke=\"black\" strokeWidth=\"4\" />\n        <line x1=\"60\" y1=\"40\" x2=\"120\" y2=\"0\" stroke=\"black\" strokeWidth=\"4\" />\n      </mask>\n      <rect\n        mask=\"url(#myMask1)\"\n        className={classes.path}\n        x=\"0\"\n        y=\"0\"\n        rx=\"8\"\n        ry=\"8\"\n        width=\"120\"\n        height=\"80\"\n      />\n    </svg>\n  );\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  circle: {\n    pointerEvents: 'all',\n    fill: '#fff',\n    stroke: '#00bfff',\n    strokeWidth: 0,\n    cursor: 'move',\n  },\n  arrow: {\n    pointerEvents: 'all',\n    fill: '#00bfff',\n  },\n  root: {\n    cursor: 'move',\n    position: 'absolute',\n    overflow: 'visible',\n    pointerEvents: 'none',\n    width: 120,\n    height: 80,\n    filter: 'drop-shadow( 3px 3px 2px rgba(0, 191, 255, 0.7))',\n    //boxShadow: `0 5px 10px ${theme.palette.divider}, 0 0 0 1px ${theme.palette.background.default}`,\n  },\n  path: {\n    pointerEvents: 'all',\n    stroke: 'rgb(0, 191, 255)',\n    fill: 'rgb(0, 191, 255)',\n    strokeWidth: 0,\n  },\n  hover: {\n    opacity: 0.3,\n    strokeWidth: 0,\n  },\n}));\n\nexport default Node;\n","import React from 'react';\nimport Link from './Link';\nimport Canvas from './Canvas';\nimport { ThemeProvider } from '@material-ui/core';\nimport useTheme from './Theme';\nimport Node from './Node';\nimport Start from './Start';\nimport Email from './Email';\n\nfunction App() {\n  const theme = useTheme();\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"App\">\n        <Canvas>\n          <Link />\n          <Node />\n          <Start />\n          <Email />\n        </Canvas>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","/**\n * Copyright (c) CloudIO, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { useMemo } from 'react';\nimport { useStateXValue } from '@cloudio/statex';\nimport { useMediaQuery } from '@material-ui/core';\nimport { darkModePath } from './state';\n\nexport default function useTheme() {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const isDarkTheme = useStateXValue(darkModePath, prefersDarkMode);\n  const theme = useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: isDarkTheme ? 'dark' : 'light',\n          primary: {\n            light: 'rgba(239, 103, 13, 0.65)',\n            main: '#ef670d',\n            dark: '#ef670d',\n            contrastText: '#fff',\n          },\n          secondary: {\n            light: 'rgba(239, 103, 13, 0.65)',\n            main: '#ef670d',\n            dark: '#ef670d',\n            contrastText: '#fff',\n          },\n        },\n        overrides: {\n          MuiButton: {\n            root: {\n              textTransform: 'none',\n            },\n          },\n          MuiTab: {\n            root: {\n              textTransform: 'none',\n            },\n          },\n        },\n      }),\n    [isDarkTheme],\n  );\n  return theme;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { StateXProvider } from '@cloudio/statex';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { defaultState } from './state';\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateXProvider initialState={defaultState}>\n      <App />\n    </StateXProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}